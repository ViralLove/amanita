# –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Supabase –∏ —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫–∞–∑–æ–≤ –≤ Amanita

## –û–±—â–∞—è —Ü–µ–ª—å
–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Supabase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –∑–∞–∫–∞–∑–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö.

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ö–∞—Ç–∞–ª–æ–≥ –∏ –∑–∞–∫–∞–∑—ã** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö (–æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)
- **Supabase** - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–µ–∂–¥—É –±–ª–æ–∫—á–µ–π–Ω–æ–º –∏ Supabase
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Supabase

---

## –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 1.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –∏ —É–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

üõ† **–ó–∞–¥–∞—á–∞**: –£–ª—É—á—à–µ–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Amanita –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ–¥–Ω–æ–π –Ω–æ–¥—ã —Å –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π

üéØ **–¶–µ–ª—å**: –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π SQL-—Å–∫—Ä–∏–ø—Ç db.sql, —É—á–∏—Ç—ã–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω—É—é, —Ç–æ—á–Ω—É—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö, –∑–∞–∫–∞–∑–∞—Ö –∏ –æ–ø–ª–∞—Ç–µ, —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π wallet-based –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç–∏.

#### ‚úÖ **–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö**

**1. –ü—Ä–∏–≤–µ—Å—Ç–∏ —Ç–∏–ø—ã float –∫ numeric** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –í—Å–µ –ø–æ–ª—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –¥–µ–Ω—å–≥–∞–º–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ numeric:
  - `price` ‚Üí `numeric(18,8)` –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç ‚úÖ
  - `shipping_cost` ‚Üí `numeric(12,2)` –¥–ª—è —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç ‚úÖ
  - `otp_amount` ‚Üí `numeric(18,8)` –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ ‚úÖ
  - `subtotal` ‚Üí `numeric(18,8)` –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç ‚úÖ
  - `cost` ‚Üí `numeric(12,2)` –¥–ª—è —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç ‚úÖ
  - `amount` ‚Üí `numeric(18,8)` –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç ‚úÖ

**2. –£–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –∏–∑ products** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –ó–∞–º–µ–Ω–∏—Ç—å `categories` –∏ `forms` –∫–∞–∫ –º–∞—Å—Å–∏–≤—ã –Ω–∞ —Å–≤—è–∑–∏ many-to-many:
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `product_categories` (product_id, category) ‚úÖ
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É `product_forms` (product_id, form) ‚úÖ
  - –£–¥–∞–ª–∏—Ç—å GIN –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –º–∞—Å—Å–∏–≤–∞—Ö ‚úÖ
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—ã—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —Å–≤—è–∑–∏ ‚úÖ
  - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `view_active_products` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JOIN ‚úÖ

**3. –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] `order_hash` ‚Üí `varchar(66)` (—Ñ–æ—Ä–º–∞—Ç 0x...) ‚úÖ
- [x] `otp_amount` ‚Üí `numeric(18,8) not null` ‚úÖ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ ItemY1)
- [x] `weight_unit` ‚Üí `text not null default 'g'` ‚úÖ
- [x] `volume_unit` ‚Üí `text not null default 'ml'` ‚úÖ
- [x] `status` –≤ payment_transactions ‚Üí `text check (status in ('pending', 'confirmed', 'failed')) not null default 'pending'` ‚úÖ

**4. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] `users` ‚Üí `wallet_users` (–∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –±—É–¥—É—â–∏–º–∏ —Ä–æ–ª—è–º–∏) ‚úÖ
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã ‚úÖ
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ ‚úÖ
  - –û–±–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ view_seller_orders ‚úÖ
  - –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚úÖ

**5. –î–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] `products.id` ‚Üí `create unique index idx_products_id_unique on products(id)` ‚úÖ
- [x] `product_descriptions.id` ‚Üí `create unique index idx_product_descriptions_id_unique on product_descriptions(id)` ‚úÖ
- [x] `orders.id` ‚Üí `create unique index idx_orders_id_unique on orders(id)` ‚úÖ
- [x] `shipping_methods.id` ‚Üí `create unique index idx_shipping_methods_id_unique on shipping_methods(id)` ‚úÖ
- [x] `seller_profile.seller_address` ‚Üí `create unique index idx_seller_profile_address_unique on seller_profile(seller_address)` ‚úÖ

#### üåç **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–≤–∞—Ä–µ–π** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**6. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å–ª–æ–≤–∞—Ä–µ–π** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `languages` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–¥–æ–≤ —è–∑—ã–∫–æ–≤ ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ —è–∑—ã–∫–æ–≤ ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úÖ

**7. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `category_dictionary` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `category_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–≤—è–∑—å many-to-many —á–µ—Ä–µ–∑ `product_categories` ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

**8. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `form_dictionary` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `form_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–≤—è–∑—å many-to-many —á–µ—Ä–µ–∑ `product_forms` ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

**9. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `measurement_units` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `measurement_unit_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω check constraint –¥–ª—è —Ç–∏–ø–æ–≤ –µ–¥–∏–Ω–∏—Ü ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

**10. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `order_statuses` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `order_status_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

**11. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `payment_statuses` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `payment_status_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

**12. –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–∞–ª—é—Ç—ã** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `currencies` (—Å–ª–æ–≤–∞—Ä—å) ‚úÖ
- [x] –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `currency_translations` (–ø–µ—Ä–µ–≤–æ–¥—ã) ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π –∏ —è–∑—ã–∫–æ–≤ ‚úÖ

#### üîß **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**

**11. –ê—É–¥–∏—Ç –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `wallet_users`:
  - `ip_address` inet ‚úÖ
  - `telegram_user_id` bigint ‚úÖ
  - `last_login` timestamptz default now() ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `product_descriptions`:
  - `version` integer not null default 1 ‚úÖ
  - `created_by` uuid references wallet_users(id) ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úÖ

**12. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ–∑–¥–∞–Ω VIEW `products_with_translations` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ JOIN ‚úÖ
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤—è–∑—å —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä–∏ –∏ –ø–µ—Ä–µ–≤–æ–¥—ã ‚úÖ
- [x] –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –≤ –º–∞—Å—Å–∏–≤—ã category_names –∏ form_names ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úÖ
- [x] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä–µ–≤–æ–¥–æ–≤ ‚úÖ

**13. RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –ù–∞—Å—Ç—Ä–æ–µ–Ω Row Level Security –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ‚úÖ
  - `orders` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–¥–∞–≤—Ü–∞ ‚úÖ
  - `wallet_users` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚úÖ
  - `cart_items` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã ‚úÖ
  - `order_status_history` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤ ‚úÖ
  - `payment_transactions` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–ª–∞—Ç–µ–∂–µ–π ‚úÖ
  - `seller_profile` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–æ–¥–∞–≤—Ü–∞ ‚úÖ
  - `webhook_events` - –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π –≤–µ–±—Ö—É–∫–æ–≤ ‚úÖ
- [x] –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `seller_address` –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–æ–¥—ã ‚úÖ
- [x] –ü—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞—Ç–∞–ª–æ–≥) –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –±–µ–∑ RLS –¥–ª—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ ‚úÖ
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫–æ –≤—Å–µ–º –ø–æ–ª–∏—Ç–∏–∫–∞–º –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úÖ

**14. –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤: `(category_id, language_code)` ‚úÖ
- [x] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–≤—è–∑–µ–π: `(product_id, category_id)` ‚úÖ
- [ ] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞: `gin(to_tsvector('russian', name))` (–æ—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É)

#### üìä **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

**15. –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û
- [x] –í—Å—Ç–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏: 'en', 'ru', 'es', 'fr', 'de' ‚úÖ (–¥–æ–±–∞–≤–ª–µ–Ω–æ 15 —è–∑—ã–∫–æ–≤ –∏–∑ bot/templates)
- [x] –í—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: 'mushroom', 'plant', 'mental health', 'focus', 'ADHD support', 'mental force', 'immune system', 'vital force', 'antiparasite'
- [x] –í—Å—Ç–∞–≤–∏—Ç—å —Ñ–æ—Ä–º—ã: 'mixed slices', 'whole caps', 'broken caps', 'premium caps', 'powder', 'tincture', 'flower', 'chunks', 'dried whole', 'dried powder', 'dried strips', 'whole dried'
- [x] –í—Å—Ç–∞–≤–∏—Ç—å –µ–¥–∏–Ω–∏—Ü—ã: 'g', 'ml'
- [x] –í—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã: 'pending', 'confirmed', 'shipped', 'delivered', 'cancelled' (–∑–∞–∫–∞–∑—ã), 'pending', 'confirmed', 'failed' (–ø–ª–∞—Ç–µ–∂–∏)
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –≤—Å–µ—Ö —Å–ª–æ–≤–∞—Ä–µ–π
- [x] –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª db_dict_data.md —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤

**16. –ü–µ—Ä–µ–≤–æ–¥—ã**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ –≤—Å–µ —è–∑—ã–∫–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ `bot/templates/`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª–Ω–æ—Ç—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤

#### üöÄ **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**

**17. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏**
- [ ] –°–æ–∑–¥–∞—Ç—å backup —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –º–∞—Å—Å–∏–≤–æ–≤ –≤ —Å–≤—è–∑–∏
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä–µ–π –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –û—Ç–∫–∞—Ç –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

#### üí° **–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤–∞–ª—é—Ç –≤ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–¥–∞—Ç–∞, –≤—Ä–µ–º—è)
- [ ] –°–æ–∑–¥–∞—Ç—å API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ Redis

### 1.2 –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Order` –≤ `bot/model/order.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `OrderStatus` (enum)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `ShippingOption`
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `CartItem`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ Pydantic

### 1.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Supabase –≤ `bot/config.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (dev/prod)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

## –≠—Ç–∞–ø 2: –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### 2.1 SupabaseService
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫–∞–∑–∞–º–∏:
  - `create_order()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `update_order_status()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - `get_order_by_id()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ ID
  - `get_orders_by_seller()` - –∑–∞–∫–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
  - `get_orders_by_buyer()` - –∑–∞–∫–∞–∑—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
  - `get_order_by_otp()` - –ø–æ–∏—Å–∫ –ø–æ OTP
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤:
  - `sync_products()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
  - `get_product_by_id()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
  - `update_product()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏:
  - `get_shipping_options()` - —Å–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏
  - `add_shipping_option()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

### 2.2 OrderManagementService
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ (–¥–æ–±–∞–≤–∏—Ç—å `self`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:
  - `BlockchainService`
  - `SupabaseService`
  - `ProductRegistryService`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞:
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –†–∞—Å—á—ë—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OTP
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ Supabase
  - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ IPFS
  - –í—ã–∑–æ–≤ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã:
  - `get_order()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `get_orders_for_seller()` - –∑–∞–∫–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
  - `get_order_by_otp()` - –ø–æ–∏—Å–∫ –ø–æ OTP
  - `update_order_status()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OTP —Å–∏—Å—Ç–µ–º—É:
  - `generate_otp()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è OTP
  - `extract_otp_from_amount()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ OTP –∏–∑ —Å—É–º–º—ã
  - `validate_otp()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è OTP
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å –ø–ª–∞—Ç–µ–∂–µ–π:
  - `listen_for_payments()` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π
  - `process_payment_event()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø–ª–∞—Ç–µ–∂–∞

### 2.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ServiceFactory
- [ ] –î–æ–±–∞–≤–∏—Ç—å `SupabaseService` –≤ —Ñ–∞–±—Ä–∏–∫—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å `OrderManagementService` –≤ —Ñ–∞–±—Ä–∏–∫—É
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤ `main.py`

---

## –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º

### 3.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Orders –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `Orders.sol`:
  - `createOrder()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `getOrder()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `updateOrderStatus()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - `getOrdersBySeller()` - –∑–∞–∫–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å ABI –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

### 3.2 BlockchainService
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫–∞–∑–∞–º–∏:
  - `create_order()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `get_order()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `update_order_status()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - `get_orders_by_seller()` - –∑–∞–∫–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –∑–∞–∫–∞–∑–æ–≤:
  - `OrderCreated`
  - `OrderStatusUpdated`
  - `OrderPaid`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è OTP:
  - `validate_otp_payment()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞ –ø–æ OTP
  - `extract_otp_from_amount()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ OTP

### 3.3 –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å `DataSyncService` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–±–ª–æ–∫—á–µ–π–Ω ‚Üí Supabase)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ (Supabase ‚Üí –±–ª–æ–∫—á–µ–π–Ω)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

## –≠—Ç–∞–ø 4: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### 4.1 –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/handlers/orders.py`:
  - `show_cart()` - –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä–∑–∏–Ω—É
  - `add_to_cart()` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
  - `remove_from_cart()` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
  - `checkout()` - –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
  - `show_order()` - –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫–∞–∑
  - `track_order()` - –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∑–∞–∫–∞–∑
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/handlers/seller_orders.py`:
  - `show_seller_orders()` - –∑–∞–∫–∞–∑—ã –ø—Ä–æ–¥–∞–≤—Ü–∞
  - `update_order_status()` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
  - `process_order()` - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–∫–∞–∑
  - `ship_order()` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑

### 4.2 –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –º–µ–Ω—é
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/keyboards/orders.py`:
  - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫–æ—Ä–∑–∏–Ω—ã
  - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
  - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–∞
  - –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é:
  - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–ó–∞–∫–∞–∑—ã"
  - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–ö–æ—Ä–∑–∏–Ω–∞"

### 4.3 –°–æ—Å—Ç–æ—è–Ω–∏—è FSM
- [ ] –°–æ–∑–¥–∞—Ç—å `bot/fsm/order_states.py`:
  - `OrderCreation` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - `ShippingSelection` - –≤—ã–±–æ—Ä –¥–æ—Å—Ç–∞–≤–∫–∏
  - `PaymentConfirmation` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
  - `OrderConfirmation` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `bot/fsm/onboarding_states.py` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

---

## –≠—Ç–∞–ø 5: –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### 5.1 OTP —Å–∏—Å—Ç–µ–º–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é OTP:
  - –ê–ª–≥–æ—Ä–∏—Ç–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 4-6 —Ü–∏—Ñ—Ä –∫ —Å—É–º–º–µ
  - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–ª–∞—Ç–µ–∂–µ–π:
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ OTP –∏–∑ —Å—É–º–º—ã –ø–ª–∞—Ç–µ–∂–∞
  - –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–∞ –ø–æ OTP
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü—É –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –æ —Å—Ç–∞—Ç—É—Å–µ

### 5.2 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π:
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –±–ª–æ–∫—á–µ–π–Ω–µ
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø–ª–∞—Ç–µ–∂–µ–π
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:
  - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å—É–º–º–∞
  - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π OTP
  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

---

## –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### 6.1 –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è `SupabaseService`:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
  - –ü–æ–∏—Å–∫ –ø–æ OTP
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è `OrderManagementService`:
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OTP
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –¢–µ—Å—Ç—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–ª–æ–∫—á–µ–π–Ω ‚Üî Supabase
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 6.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 6.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –¢–µ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Supabase
- [ ] –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- [ ] –¢–µ—Å—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

---

## –≠—Ç–∞–ø 7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 7.1 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/registry-service.md`
- [ ] –°–æ–∑–¥–∞—Ç—å `docs/order-management.md`
- [ ] –°–æ–∑–¥–∞—Ç—å `docs/supabase-integration.md`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docs/bot_services_architecture.md`
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### 7.2 –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase –¥–ª—è production
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≠—Ç–∞–ø—ã 1-3)
1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
2. –î–æ—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≠—Ç–∞–ø—ã 4-5)
1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–≠—Ç–∞–ø—ã 6-7)
1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞

### –≠—Ç–∞–ø —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º –∫–æ–≥–¥–∞:
- [ ] –í—Å–µ –∑–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏:
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ - –∫–æ–¥-—Ä–µ–≤—å—é
- –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 3 - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 5 - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π
- –ü–æ—Å–ª–µ —ç—Ç–∞–ø–∞ 7 - —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫–∏:
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Supabase** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å OTP** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
4. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - fallback –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω

### –ú–∏—Ç–∏–≥–∞—Ü–∏—è:
1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω–¥–µ–∫—Å—ã
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
3. –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
