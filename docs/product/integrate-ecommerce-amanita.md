## User Stories –¥–ª—è MVP Amanita Connector

### 1. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∫–Ω–æ–ø–∫—É "Sync" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞, —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç –≤ –±–ª–æ–∫—á–µ–π–Ω —á–µ—Ä–µ–∑ Python-—Å–µ—Ä–≤–∏—Å
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í –∫–∞—Ä—Ç–æ—á–∫–µ –ª—é–±–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ WooCommerce –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–∞–±–æ–∫—Å —Å –∫–Ω–æ–ø–∫–æ–π "Sync". –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∑–∞–¥–∞—á–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å (Action Scheduler), —Å—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ—Ç–∞–±–æ–∫—Å–µ.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–¥—É–∫—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è tx_hash –∏ —Å—Ç–∞—Ç—É—Å (pending/success/error).

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–∑–∞–º–µ–Ω–∞ JIRA)

1. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–±–æ–∫—Å –≤ –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ WooCommerce**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∞–±–æ–∫—Å —á–µ—Ä–µ–∑ add_meta_box —Ç–æ–ª—å–∫–æ –¥–ª—è post_type=product.
   - –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–Ω–æ–ø–∫—É "Sync", —Å—Ç–∞—Ç—É—Å sync, tx_hash, —Å—Å—ã–ª–∫—É –Ω–∞ –±–ª–æ–∫—á–µ–π–Ω/IPFS.

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å capability-checks –∏ nonce –¥–ª—è –∫–Ω–æ–ø–∫–∏**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (manage_options –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è capability).
   - –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å nonce –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç CSRF.

3. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "Sync" (AJAX/REST)**
   - –°–æ–∑–¥–∞—Ç—å REST endpoint (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, /wp-json/amanita/v1/sync/product).
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (product_id, nonce, –ø—Ä–∞–≤–∞).
   - –û—Ç–∫–ª—é—á–∞—Ç—å –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å —É–∂–µ pending.
   - –î–æ–±–∞–≤–∏—Ç—å rate-limiting (rest_pre_dispatch).


4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π Log store**
   - –í—Å–µ –æ—à–∏–±–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è sync –ø–∏—Å–∞—Ç—å –≤ Action Scheduler log store.
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤ –≤ –º–µ—Ç–∞–±–æ–∫—Å–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

5. **–¢–µ—Å—Ç—ã**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WP_Mock –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π WP/WooCommerce (–Ω–∏–∫–∞–∫–∏—Ö —Å–∞–º–æ–ø–∏—Å–Ω—ã—Ö –∑–∞–≥–ª—É—à–µ–∫).
–í —Ç–µ—Å—Ç–∞—Ö –ª–æ–≥–æ–≤ ‚Äî –º–æ–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏ WordPress, –∞ –Ω–µ —Å–∞–º—É –ª–æ–≥–∏–∫—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
–í —Ç–µ—Å—Ç–∞—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî –º–æ–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ Python-—Å–µ—Ä–≤–∏—Å—É, –≤–æ–∑–≤—Ä–∞—â–∞—è —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç.
–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–∞–º–æ–ø–∏—Å–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –∏–∑ bootstrap.php ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ WP_Mock::bootstrap() –∏ –∑–∞–≥—Ä—É–∑–∫—É –∫–ª–∞—Å—Å–æ–≤ –ø–ª–∞–≥–∏–Ω–∞.
–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–∏—Å—Ç—ã–º–∏ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –û–ø–∏—Å–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫–Ω–æ–ø–∫–∏ Sync, —Å—Ç–∞—Ç—É—Å—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, fallback –≤ README –∏ dev-–¥–æ–∫–∞—Ö.

#### –û—Ç—á–µ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∞ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫–æ–¥—É
1. –ß—Ç–æ —É–∂–µ –¥–µ–ª–∞–µ—Ç –ø–ª–∞–≥–∏–Ω Amanita Connector
–°–ª–æ–π	–†–æ–ª—å	–ì–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è	–ü—Ä–æ–≤–µ—Ä–∫–∞ WooCommerce, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö—É–∫-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ admin_post_amanita_sync_product	amanita.php, —Å—Ç—Ä–æ–∫–∏ 26-40
–ù–∞—Å—Ç—Ä–æ–π–∫–∏	–°—Ç—Ä–∞–Ω–∏—Ü–∞ WooCommerce ‚Üí Amanita —Å –ø–æ–ª—è–º–∏ URL —Å–µ—Ä–≤–∏—Å–∞, API-key, debug, logging	admin/SettingsPage.php, —Å—Ç—Ä–æ–∫–∏ 99-106
UI –≤ —Ç–æ–≤–∞—Ä–µ	–ú–µ—Ç–∞–±–æ–∫—Å ¬´Amanita Sync¬ª + –≤—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤	admin/MetaBoxes.php, —Å—Ç—Ä–æ–∫–∏ 12-17
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è	‚Ä¢ Rate-limit 5 –∑–∞–ø—Ä–æ—Å–æ–≤ / –º–∏–Ω
‚Ä¢ –ú–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç–æ–≤–∞—Ä–∞ (pending ‚Üí success/error)
‚Ä¢ –ì–æ—Ç–æ–≤–∏—Ç payload, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON –Ω–∞ /api/products/sync	includes/SyncProduct.php, handle_sync_request() —Å—Ç—Ä. 71-79 + send_to_python_service() —Å—Ç—Ä. 16-24, 30-40
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ	–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π 1000 –∑–∞–ø–∏—Å–µ–π, —É—Ä–æ–≤–Ω–∏ INFO/WARNING/ERROR/DEBUG	includes/Logger.php, —Å—Ç—Ä–æ–∫–∏ 33-40 & 47-50

–ò—Ç–æ–≥: –ø–ª–∞–≥–∏–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã WooCommerce —Å Python-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–º (–æ–ø–∏—Å–∞–Ω–∏–µ –≤ composer.json) .

2. –ß—Ç–æ –ø–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äì —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π bootstrap.php, WP-Mock –∏ –∞–≤—Ç–æ–ª–æ–∞–¥–µ—Ä Composer

Unit-—Ç–µ—Å—Ç—ã ‚Äì 1 —Ñ–∞–π–ª SyncProductTest.php –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

—É—Å–ø–µ—à–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é (200 OK)

–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–≤–∞—Ä–∞

–æ—à–∏–±–∫—É WP_Error (¬´HTTP error ‚Ä¶¬ª) ‚Äì —Å—Ç—Ä–æ–∫–∏ 62-80

–ü–æ–∫—Ä—ã—Ç–∏–µ: —Ç–æ–ª—å–∫–æ ~1 –∫–ª–∞—Å—Å –∏–∑ 5 (‚âà20 % –ª–æ–≥–∏–∫–∏). –õ–æ–≥–∏, UI, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ rate-limit –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è.

3. –ù–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã
–û–±–ª–∞—Å—Ç—å	–ï—Å—Ç—å —Ç–µ—Å—Ç—ã?	–ó–∞–º–µ—á–∞–Ω–∏—è
Mapper –¥–∞–Ω–Ω—ã—Ö (map_product_data)	‚ùå	–ö—Ä–∏—Ç–∏—á–Ω–æ: –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è JSON; –æ—à–∏–±–∫–∏ –±—É–¥—É—Ç –Ω–µ–∑–∞–º–µ—Ç–Ω—ã.
–û—Ç–ø—Ä–∞–≤–∫–∞ HTTP (send_to_python_service)	‚úÖ/‚ö†Ô∏è	–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è happy-path –∏ WP_Error, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∫–æ–¥—ã 4xx/5xx –∏ —Ç–∞–π–º–∞—É—Ç—ã.
Rate-limit & nonce	‚ùå	–ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –±–∞–≥ —É–π–¥—ë—Ç –≤ –ø—Ä–æ–¥.
Logger	‚ùå	–ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–∏—Å–∏/—Ä–æ—Ç–∞—Ü–∏–∏/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ DEBUG.
UI (MetaBox, SettingsPage)	‚ùå	–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç smoke-—Ç–µ—Å—Ç—ã —à–∞–±–ª–æ–Ω–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö—É–∫–æ–≤.
Uninstaller & –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ö—É–∫–æ–≤	‚ùå	–ù–µ—Ç —Ç–µ—Å—Ç–æ–≤, –∞ –≤ –∫–æ–¥–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –∫–ª–∞—Å—Å Amanita\Uninstaller, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤ –∞—Ä—Ö–∏–≤–µ –Ω–µ—Ç.

4. –†–∏—Å–∫–∏ –∫–æ–¥–∞, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –≤ –∞—É–¥–∏—Ç–µ
–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã ‚Äì SyncOrder.php, HttpClient.php, Uninstaller –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –ø–æ—Å—Ç–∞–≤–∫—É, –Ω–æ require-—è—Ç—Å—è .

–ì–ª–æ–±–∞–ª—å–Ω—ã–π namespace –¥–ª—è –∫–ª–∞—Å—Å–æ–≤ (class Amanita_Logger), –Ω–æ Composer-autoload –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Amanita\\ namespace ‚Äì –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –≤ –ø—Ä–æ–¥–µ.

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º—ã

CSRF-nonce –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, –Ω–æ –Ω–µ—Ç esc_url_raw –ø—Ä–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–µ.

wp_die() –≤—ã–≤–æ–¥–∏—Ç —Å—ã—Ä–æ–π —Ç–µ–∫—Å—Ç, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ wp_safe_redirect + exit;.

HTTP-–∫–ª–∏–µ–Ω—Ç ‚Äì –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback-–∞ –Ω–∞ wp_remote_retrieve_response_message(), –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞ > 30 c.

Performance ‚Äì get_product_meta() –≤—ã–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –º–µ—Ç–∞-–ø–∞—Ä—ã; –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ —ç—Ç–æ O(N).

i18n ‚Äì UI-—Å—Ç—Ä–æ–∫–∏ –≤ SettingsPage/MetaBox —á–∞—Å—Ç–∏—á–Ω–æ –Ω–µ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ __() / esc_html__().

5. –ß—Ç–æ —É–ª—É—á—à–∏—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç	–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å	–ü–æ–¥—Å–∫–∞–∑–∫–∞
üü¢	LoggerTest: write/read/rotation, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ product_id	–º–æ–∫–Ω–∏—Ç–µ get_option / update_option
üü¢	MapperTest: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON	—Å—Ä–∞–≤–Ω–∏—Ç–µ json_decode($actual, true) —Å —Ñ–∏–∫—Å—Ç—É—Ä–æ–π
üü°	send_to_python_service: –∫–æ–¥—ã 400/500, —Ç–∞–π–º–∞—É—Ç	–º–æ–∫ wp_remote_post c —Ä–∞–∑–Ω—ã–º–∏ response['code']
üü°	RateLimitTest: –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, >5 –≤—ã–∑–æ–≤–æ–≤	–º–æ–∫ get_transient / set_transient
üü°	HandleSyncRequest: –≤–∞–ª–∏–¥–Ω—ã–π nonce, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–æ–ª—å	–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WP-Mock –¥–ª—è current_user_can, wp_verify_nonce
üü†	SettingsPageSmokeTest: –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ö—É–∫ admin_menu —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è	has_action('admin_menu', ‚Ä¶)

6. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç
–ü—Ä–∏–≤–µ—Å—Ç–∏ –∫–ª–∞—Å—Å—ã –∫ PSR-4 (–Ω–∞–ø—Ä–∏–º–µ—Ä namespace Amanita; class Logger).

–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ–∞–π–ª—ã (HttpClient, SyncOrder, Uninstaller) –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å require_once.

–†–∞—Å—à–∏—Ä–∏—Ç—å CI: composer test, wp-env run tests + phpcs (WordPress‚ÄêVIP ruleset).

–ü–æ–≤—ã—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å URL —Å–µ—Ä–≤–∏—Å–∞ (filter_var($url, FILTER_VALIDATE_URL))

–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å esc_url_raw –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞.

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äì –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –≤—ã–±–æ—Ä–∫—É –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å wc_get_product() —Å –∫—ç—à–µ–º.

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äì –∫—Ä–∞—Ç–∫–∏–π README –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ python-backend + makefile —Å composer install && npm install.

TL;DR
–ü–ª–∞–≥–∏–Ω —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—É—é –∑–∞–¥–∞—á—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –∏–º–µ–µ—Ç —Ä–∞–±–æ—á–∏–µ unit-—Ç–µ—Å—Ç—ã, –Ω–æ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—à—å ~20 % –∫–æ–¥–∞. –ì–ª–∞–≤–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã ‚Äî –ª–æ–≥–≥–µ—Ä, mapper, rate-limit, UI, –∞ —Ç–∞–∫–∂–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –ò—Å–ø—Ä–∞–≤–∏–≤ —ç—Ç–æ –∏ –¥–æ–≤–µ–¥—è —Ç–µ—Å—Ç-–ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ 70 %+, –≤—ã —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–Ω–∏–∑–∏—Ç–µ —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç–µ —Ä–µ–≤—å—é –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Ñ–∏—á.

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

#### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
**priority:** critical
**tasks:**
- "–°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–ª–∞—Å—Å—ã (SyncOrder, HttpClient, Uninstaller)"
- "–ò—Å–ø—Ä–∞–≤–∏—Ç—å namespace –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ (PSR-4)"
- "–ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (esc_url_raw, wp_safe_redirect)"

### –ê—É–¥–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–π –≤ WordPress –ò–ò –º–æ–¥–µ–ª—å—é
–£—Ä–æ–≤–µ–Ω—å	–ß—Ç–æ —É–∂–µ —Ö–æ—Ä–æ—à–æ	–ß—Ç–æ –µ—â—ë –Ω—É–∂–Ω–æ –¥–æ–≤–µ—Å—Ç–∏
‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–æ
‚Ä¢ –ü–æ—è–≤–∏–ª–∏—Å—å –∫–ª–∞—Å—Å—ã HttpClient, SyncOrder, SyncProduct, Logger –∏ —Ç–µ—Å—Ç—ã –∫ –Ω–∏–º.
‚Ä¢ –í SyncProduct –¥–æ–±–∞–≤–ª–µ–Ω—ã nonce-–ø—Ä–æ–≤–µ—Ä–∫–∏ + rate-limit + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –±–∞–∑–æ–≤—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∑–∞–∫—Ä—ã—Ç—ã.	‚ùó –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å—ë –µ—â—ë –ª–æ–º–∞–µ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏—é ‚Äî –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —Ñ–∞–π–ª–µ –∏—â–µ—Ç—Å—è composer/autoload_real.php, –∞ –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è vendor/autoload.php. –ü–æ–∫–∞ —ç—Ç–æ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—Ç–µ, Composer-–∫–ª–∞—Å—Å—ã (–≤–∫–ª—é—á–∞—è Uninstaller, —Å–º. –Ω–∏–∂–µ) –Ω–µ –±—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã.	
‚úÖ Namespaces ‚Äî –ø–æ—è–≤–∏–ª–∞—Å—å namespaced-–≤–µ—Ä—Å–∏—è Amanita\Admin\* –∏ Amanita\Logger.	–î—É–±–ª–∏ –∫–ª–∞—Å—Å–æ–≤ ‚Äî –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏ namespaced –≤–µ—Ä—Å–∏–∏ MetaBoxes, SettingsPage, Logger –∏ –¥—Ä. –ü—Ä–∏–º–µ—Ä: Amanita\Admin\MetaBoxes –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π Amanita_MetaBoxes. –í amanita.php –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å. –≠—Ç–æ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞–º—è—Ç—å –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É. –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω —Å—Ç–∏–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è namespaces) –∏ —É–¥–∞–ª–∏—Ç–µ –¥—É–±–ª–∏.	
‚úÖ –¢–µ—Å—Ç-–±—É—Ç—Å—Ç—Ä—ç–ø ‚Äî bootstrap.php —É–∂–µ —Ç—è–Ω–µ—Ç vendor/autoload.php –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç WP-Mock –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.	–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚Äî LoggerTest –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ ¬´–∫–ª–∞—Å—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª, –±–µ–∑ –∞—Å—Å–µ—Ä—Ç–æ–≤ –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–ø—Ä–∏–º–µ—Ä ‚Äî –≤—Å–µ–≥–¥–∞ $this->assertTrue(true)). –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –Ω–µ –ª–æ–≤—è—Ç—Å—è. –°—Ç–æ–∏—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å –ª–æ–≥–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å update_option / —Ä–æ—Ç–∞—Ü–∏—é. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äî –ø–æ–∫—Ä—ã—Ç—å HttpClient, SyncOrder.	
‚úÖ Security ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω—ã esc_url_raw, wp_safe_redirect, sanitization –≤ –º–µ—Ç–∞–±–æ–∫—Å–∞—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.	Uninstaller ‚Äî —Ö—É–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ Amanita\Uninstaller, –Ω–æ —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤ —Ä–µ–ø–æ —è –Ω–µ –Ω–∞—à—ë–ª ‚Üí —Ñ–∞—Ç–∞–ª –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏. –°–æ–∑–¥–∞–π—Ç–µ includes/Uninstaller.php —Å –º–µ—Ç–æ–¥–∞–º–∏ on_activation(), on_deactivation(), cleanup(), –ª–∏–±–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã.	
‚úÖ HTTP-–∫–ª–∏–µ–Ω—Ç ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è URL –∏ scheme, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ API-key.	PSR-4-map ‚Äî –≤ composer.json –º–∞–ø–ø–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ "Amanita\\": "includes/". –§–∞–π–ª—ã –∏–∑ admin/ –Ω–µ –≥—Ä—É–∑—è—Ç—Å—è –∞–≤—Ç–æ–ª–æ–∞–¥–µ—Ä–æ–º; –¥–æ–±–∞–≤—å—Ç–µ "Amanita\\Admin\\": "admin/".	
‚Äî	‚Äî	PHP –≤–µ—Ä—Å–∏—è ‚Äî –≤ composer.json —É–∫–∞–∑–∞–Ω–∞ >=7.4, –∞ –≤—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç–µ –Ω–∞ PHP 8.4. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –¥–æ ^8.1 (–∏–ª–∏ –Ω–æ–≤–µ–µ) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π road-map
Composer-fix

php
Copy
Edit
// amanita.php
if (file_exists(__DIR__.'/vendor/autoload.php')) {
    require_once __DIR__.'/vendor/autoload.php';
}
PSR-4

jsonc
Copy
Edit
"autoload": {
    "psr-4": {
        "Amanita\\": "includes/",
        "Amanita\\Admin\\": "admin/"
    }
}
–∑–∞—Ç–µ–º composer dump-autoload --optimize.

–£–¥–∞–ª–∏—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã (Amanita_MetaBoxes, Amanita_SettingsPage, Amanita_Logger) –∏ –≤ amanita.php —Å–æ–∑–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã –∏–∑ namespaced-–≤–µ—Ä—Å–∏–π:

php
Copy
Edit
new \Amanita\Admin\MetaBoxes();
new \Amanita\Admin\SettingsPage();
Uninstaller ‚Äî –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª includes/Uninstaller.php:

php
Copy
Edit
namespace Amanita;

class Uninstaller {
    public static function on_activation() {/* DB table creation */}
    public static function on_deactivation() {/* cron clear */}
    public static function cleanup() {/* delete options */}
}
–¢–µ—Å—Ç—ã

Logger: –º–æ–∫–Ω–∏—Ç–µ get_option —Ç–∞–∫, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å 0 –∑–∞–ø–∏—Å–µ–π ‚Üí –≤—ã–∑–æ–≤–∏—Ç–µ Logger::info() ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ update_option –ø–æ–ª—É—á–∏–ª –º–∞—Å—Å–∏–≤ count($logs)===1.

HttpClient: –º–æ–∫–Ω–∏—Ç–µ wp_remote_post –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É 4xx/5xx.

–¶–µ–ª—å ‚Äî –ø–æ–∫—Ä—ã—Ç–∏–µ ‚â• 70 % –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º.

CI ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤ composer.json

json
Copy
Edit
"scripts": {
  "test": "vendor/bin/phpunit --coverage-text",
  "lint": "php -d detect_unicode=0 -l $(git ls-files '*.php')"
}
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ readme.txt —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏, —á—Ç–æ–±—ã WordPress.org (–∏–ª–∏ Bitbucket) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—á–∏—Ç–∞–ª –≤–µ—Ä—Å–∏—é.

–ò—Ç–æ–≥–æ
–í—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∏–ª–∏–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–∏–ª–∏ –æ—Å–Ω–æ–≤—É —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
–û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Å–ª–æ–∂–Ω—ã, –Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è production-—Å–∞–π—Ç–∞: –∞–≤—Ç–æ–ª–æ–∞–¥, –¥—É–±–ª–∏ –∫–ª–∞—Å—Å–æ–≤ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Uninstaller. –ü–æ—Å–ª–µ –∏—Ö —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω –±—É–¥–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ—â–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å.

#### –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
**priority:** high
**tasks:**
- "LoggerTest: –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ/—Ä–æ—Ç–∞—Ü–∏—è)"
- "MapperTest: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON payload"
- "RateLimitTest: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)"
- "UI —Ç–µ—Å—Ç—ã: MetaBox –∏ SettingsPage smoke-—Ç–µ—Å—Ç—ã"
- "HTTP —Ç–µ—Å—Ç—ã: –∫–æ–¥—ã 4xx/5xx, —Ç–∞–π–º–∞—É—Ç—ã, fallback"
- "Security —Ç–µ—Å—Ç—ã: nonce, capability checks, CSRF –∑–∞—â–∏—Ç–∞"

#### –≠—Ç–∞–ø 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
**priority:** high
**tasks:**
- "–í–∞–ª–∏–¥–∞—Ü–∏—è URL —Å–µ—Ä–≤–∏—Å–∞ (filter_var —Å FILTER_VALIDATE_URL)"
- "HMAC/JWT –∑–∞—â–∏—Ç–∞ –¥–ª—è REST endpoints"
- "–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (wp_safe_redirect –≤–º–µ—Å—Ç–æ wp_die)"
- "–î–æ–±–∞–≤–∏—Ç—å esc_url_raw –¥–ª—è –≤—Å–µ—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤"
- "–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ REST API"
- "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤–æ –≤—Å–µ—Ö —Ç–æ—á–∫–∞—Ö –≤—Ö–æ–¥–∞"

#### –≠—Ç–∞–ø 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**priority:** medium
**tasks:**
- "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å get_product_meta() –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤"
- "–î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ wc_get_product()"
- "–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤—ã–±–æ—Ä–∫—É –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö"
- "–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"
- "–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π"


---

### 2. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∫–Ω–æ–ø–∫—É "Sync" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∑–∞–∫–∞–∑–∞, —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑ –≤ –±–ª–æ–∫—á–µ–π–Ω —á–µ—Ä–µ–∑ Python-—Å–µ—Ä–≤–∏—Å
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í –∫–∞—Ä—Ç–æ—á–∫–µ –ª—é–±–æ–≥–æ –∑–∞–∫–∞–∑–∞ WooCommerce –ø–æ—è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–∞–±–æ–∫—Å —Å –∫–Ω–æ–ø–∫–æ–π "Sync". –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∑–∞–¥–∞—á–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, —Å—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ—Ç–∞–±–æ–∫—Å–µ.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–∫–∞–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è tx_hash –∏ —Å—Ç–∞—Ç—É—Å.

### 3. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API-URL, API-–∫–ª—é—á, seller_address, IPFS provider) –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í –∞–¥–º–∏–Ω–∫–µ WooCommerce –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞–≥–∏–Ω–∞ Amanita —Å –Ω—É–∂–Ω—ã–º–∏ –ø–æ–ª—è–º–∏. –í—Å–µ –ø–æ–ª—è –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–∞–≤.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

### 4. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É, —á—Ç–æ–±—ã –≤—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (API-–∫–ª—é—á) —Ö—Ä–∞–Ω–∏–ª–∏—Å—å –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –Ω–µ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –æ–±—ã—á–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–û–ø–∏—Å–∞–Ω–∏–µ:** API-–∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ secure API –ø–ª–∞–≥–∏–Ω–∞.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–ª—é—á –Ω–µ –≤–∏–¥–µ–Ω –≤ –±–∞–∑–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ, –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ UI.

### 5. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É, —á—Ç–æ–±—ã –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è sync –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ REST-–∑–∞–ø—Ä–æ—Å—ã –∏ UI-–¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã capability-checks –∏ nonce.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º –ø–ª–∞–≥–∏–Ω–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –Ω—É–∂–Ω—ã—Ö –ø—Ä–∞–≤.

### 6. –ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É –≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (pending, success, error) –∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é/–±–ª–æ–∫—á–µ–π–Ω –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞/–∑–∞–∫–∞–∑–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í –º–µ—Ç–∞–±–æ–∫—Å–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–π sync-–æ–ø–µ—Ä–∞—Ü–∏–∏, —Å—Å—ã–ª–∫–∞ –Ω–∞ tx_hash, —Å—Å—ã–ª–∫–∞ –Ω–∞ IPFS.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∏–¥–Ω–∞ –ø—Ä—è–º–æ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ, –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö.

### 7. –ö–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —è —Ö–æ—á—É, —á—Ç–æ–±—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ, –∞ –Ω–µ —Ç–µ—Ä—è–ª–∏—Å—å –≤ WP error_log
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ –æ—à–∏–±–∫–∏ sync –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ (Action Scheduler log store), –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É —Å–±–æ—è, –Ω–µ —Ç–µ—Ä—è—è –æ—à–∏–±–æ–∫.

### 8. –ö–∞–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —è —Ö–æ—á—É, —á—Ç–æ–±—ã –≤—Å–µ REST-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –±—ã–ª–∏ –∑–∞—â–∏—â–µ–Ω—ã HMAC/JWT –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–ª–∏ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ HTTP-–∫–æ–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–∑–≤–∞—Ç—å sync –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### 9. –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–∞–≥–∞–∑–∏–Ω–∞, —è —Ö–æ—á—É, —á—Ç–æ–±—ã –º–æ–∏ –∑–∞–∫–∞–∑—ã –∏ —Ç–æ–≤–∞—Ä—ã –±—ã–ª–∏ –Ω–∞–¥—ë–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º, –∞ –∏—Ö —Å—Ç–∞—Ç—É—Å –±—ã–ª –ø—Ä–æ–∑—Ä–∞—á–µ–Ω –¥–ª—è –∞–¥–º–∏–Ω–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ sync –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ —Ñ–æ–Ω–µ, –∞–¥–º–∏–Ω –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å, –æ—à–∏–±–∫–∏ –Ω–µ –º–µ—à–∞—é—Ç —Ä–∞–±–æ—Ç–µ –º–∞–≥–∞–∑–∏–Ω–∞.
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞–¥—ë–∂–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è –∞–¥–º–∏–Ω–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–±–æ–µ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.